name: "Setup JavaScript Runtime Environment"
description: "Comprehensive JavaScript runtime setup (Node.js, Bun, Deno) with automatic package manager detection, dependency caching, Turbo build cache, and optional Biome linter configuration"

branding:
  icon: "package"
  color: "green"

inputs:
  package-manager:
    description: "Package manager to use (npm | pnpm | yarn | bun | deno). If omitted, will be detected from package.json packageManager field or defaults to npm"
    required: false
    default: ""
  node-version:
    description: "Version Spec of the version to use in SemVer notation. It also admits such aliases as lts/*, latest, nightly and canary builds. Examples: 12.x, 10.15.1, >=10.15.0, lts/Hydrogen, 16-nightly, latest, node"
    required: false
    default: "lts/*"
  bun-version:
    description: "Bun version to install (optional). If not provided, version is auto-detected from package.json packageManager field. Example: 1.0.25"
    required: false
    default: ""
  deno-version:
    description: "Deno version to install (optional). If not provided, version is auto-detected from package.json packageManager field or deno.json/deno.jsonc. Example: 1.40.0"
    required: false
    default: ""
  biome-version:
    description: "Biome version to install (optional). If not provided, version is auto-detected from biome.jsonc or biome.json config file. Leave empty to skip Biome installation."
    required: false
    default: ""
  turbo-token:
    description: "Turbo remote cache token (optional, for Vercel Remote Cache)"
    required: false
    default: ""
  turbo-team:
    description: "Turbo team slug (optional, for Vercel Remote Cache)"
    required: false
    default: ""
  install-deps:
    description: "Whether to install dependencies (true | false). Set to false to skip dependency installation."
    required: false
    default: "true"

outputs:
  runtime:
    description: "Comma-separated list of installed runtimes (e.g., 'node', 'bun', 'node,deno')"
  node-version:
    description: "The Node.js version that was installed (e.g., '20.11.0' or 'from-file' if using version file)"
  node-version-file:
    description: "The version file used for Node.js version management (e.g., '.nvmrc', '.node-version', or empty if using input)"
  node-version-source:
    description: "The source of the Node.js version (nvmrc | node-version | input)"
  bun-version:
    description: "The Bun version that was installed (e.g., '1.0.25' or empty if not installed)"
  deno-version:
    description: "The Deno version that was installed (e.g., '1.40.0' or empty if not installed)"
  package-manager:
    description: "The detected or specified package manager (npm | pnpm | yarn | bun | deno)"
  turbo-enabled:
    description: "Whether Turbo configuration was detected (true | false)"
  turbo-config-file:
    description: "Path to Turbo config file (e.g., 'turbo.json' or empty if not found)"
  biome-enabled:
    description: "Whether Biome was installed and enabled (true | false)"
  biome-version:
    description: "The Biome version that was installed (e.g., '2.3.6', 'latest', or empty if not installed)"
  biome-config-file:
    description: "Path to Biome config file (e.g., 'biome.jsonc', 'biome.json', or empty if not found)"
  cache-hit:
    description: "Whether dependencies were restored from cache (true | partial | false | n/a)"

runs:
  using: "node24"
  pre: "dist/pre.js"
  main: "dist/main.js"
  post: "dist/post.js"
